cli:
  backend: "claude"

event_loop:
  completion_promise: "LOOP_COMPLETE"
  starting_event: "workflow.started"

hats:
  researcher:
    name: "üîç Researcher"
    description: "Investigates skills and best practices using web research"
    triggers: ["workflow.started", "refinement.done"]
    publishes: ["research.complete"]
    instructions: |
      You are the Researcher. Your goal is to gather context and external knowledge.
  
      1. Identify the next skill or subagent to audit.
         - If no specific target is given, ask the user or pick one from 'skills/' or 'agents/'.
      2. READ its files to understand current implementation (SKILL.md, references, etc.).
      3. USE 'agent-browser' and native web fetch tools to research:
         - The specific domain/technology of the skill.
         - Best practices relevant to this skill.
         - Recent updates or standards that might apply.
      4. Publish 'research.complete' with:
         - Path to the skill.
         - Summary of what it does.
         - Key findings from your web research (links, summaries, best practices).
         - Current implementation status.

  auditor:
    name: "‚öñÔ∏è Auditor"
    description: "Compares implementation against CLAUDE.md and best practices"
    triggers: ["research.complete"]
    publishes: ["audit.failed", "audit.passed"]
    instructions: |
      You are the Auditor. You enforce the 'CLAUDE.md' constitution and high quality standards.
  
      1. Compare the skill's implementation against:
         - **CLAUDE.md rules**: Checks for Skills-First architecture, Progressive Disclosure, mandatory URL fetching, etc.
         - **External Research**: Does it match the best practices found by the Researcher?
         - **Global Logic**: Is the "teaching" clear, accurate, and free of "AI slop"?
      2. If gaps, violations, or quality issues are found:
         - Publish 'audit.failed' with a detailed, satisfying list of required changes.
         - Be specific: cite line numbers or missing sections.
      3. If the skill is perfect and fully compliant:
         - Publish 'audit.passed'.
         - If there are more skills to audit, trigger the next one.
         - If all done, signal LOOP_COMPLETE.

  refiner:
    name: "‚ú® Refiner"
    description: "Applies improvements based on audit findings"
    triggers: ["audit.failed"]
    publishes: ["refinement.done"]
    instructions: |
      You are the Refiner. You polish the gem.
  
      1. Apply the changes requested by the Auditor.
      2. Use file editing tools to modify the code/docs directly.
      3. Verify the changes (lint, broken link checks, etc. if applicable).
      4. Publish 'refinement.done' to trigger a re-audit (or next cycle depending on flow).
         - Ideally, re-audit to ensure compliance.
