{
  "test_plan": {
    "name": "Skill Interaction & Context Fork Testing - Extended",
    "version": "9.0",
    "description": "Extended with 20 critical orchestration tests for complete validation",
    "test_summary": {
      "total_tests": 52,
      "completed": 28,
      "completed_partial": 1,
      "failed": 1,
      "not_started": 23,
      "in_progress": 0,
      "coverage": "28/52 completed (54% complete)",
      "raw_logs_analyzed": 31,
      "last_updated": "2026-01-25",
      "success_rate": "100% (4/4 archetype tests)",
      "note": "Sprint 0 COMPLETED: 4 archetype tests (T21-T24) all PASSED. Next: Sprint 1 (T1-T5) TaskList foundation. See ARCHETYPE_TEST_RESULTS.md"
    },
    "key_findings": {
      "critical_discovery_1": "Regular skill chains are one-way handoffs - control never returns",
      "critical_discovery_2": "Forked skills enable subroutine pattern - isolated execution with control return",
      "critical_discovery_3": "Context isolation is complete - parameters pass but context doesn't",
      "critical_discovery_4": "Forked skills are 100% autonomous - 0 permission denials across all tests",
      "critical_discovery_5": "Custom subagents and specialized tools accessible in forked context",
      "critical_discovery_6": "Double-fork (nested forks) works correctly",
      "critical_discovery_7": "TaskList tools added as built-in orchestration primitives (Layer 0)",
      "discovery_8": "Test design matters - artificial scenarios don't work in non-interactive mode",
      "discovery_9": "Real conditions are essential - tests must mirror actual usage patterns",
      "discovery_10": "Prompt specificity is critical - 'Execute X' works, 'Use skill' doesn't",
      "discovery_11": "20 new orchestration patterns identified for complete validation",
      "action_required": "Sprint 0 COMPLETE! Proceed to Sprint 1 (T1-T5) TaskList foundation, then Sprints 2-5"
    },
    "orchestration_coverage": {
      "already_validated": [
        "Regular→Regular (one-way)",
        "Regular→Forked (subroutine)",
        "Context isolation (complete)",
        "Parameter passing (via args)",
        "Double-fork depth 2",
        "Hub-and-spoke (forked workers)",
        "Subagent skill injection",
        "Forked skill autonomy",
        "Error propagation (content-level)"
      ],
      "critical_gaps": [
        "TaskList sequential workflow",
        "TaskList parallel execution",
        "TaskList with forked skills",
        "TaskList error handling",
        "Cross-session TaskList",
        "Subagent skill composition",
        "Dynamic context injection",
        "Subagent error recovery",
        "Multi-subagent coordination",
        "Subagent timeout handling",
        "Skill→Subagent→Skill chains",
        "Hub-and-spoke with TaskList",
        "Nested TaskList with forked skills",
        "Error recovery in skill chains",
        "Skill aggregation from subagents",
        "Triple-level forking",
        "Forked skill with TaskList",
        "Circular dependency detection",
        "State persistence in forked context",
        "Multi-session workflows"
      ]
    },
    "phases": [
      {
        "phase": 11,
        "name": "Sprint 0: Skill Archetype Testing",
        "description": "Validate 4 fundamental skill archetypes",
        "sprint_goal": "Test auto-applied knowledge, workflow skills, safety-critical skills, and dynamic context injection",
        "tests": [
          {
            "test_id": "T21",
            "name": "typescript-conventions",
            "archetype": "Reference Skill (Auto-Applied Knowledge)",
            "real_scenario": "Team conventions that Claude auto-discovers and applies",
            "status": "COMPLETED",
            "priority": "HIGH",
            "description": "Test auto-applied knowledge skill pattern",
            "validation": "Skill auto-loads without explicit invocation, Claude applies conventions when writing TypeScript",
            "skill_file": "phase_11/test_T21.typescript.conventions.skill.md",
            "test_prompt": "Write a TypeScript function following team conventions",
            "success_criteria": [
              "Skill auto-loads without explicit invocation",
              "Claude applies conventions when writing TypeScript",
              "Conventions guide code style decisions",
              "No explicit skill call needed"
            ],
            "key_config": {
              "user-invocable": false,
              "disable-model-invocation": false,
              "allowed-tools": ["Read"]
            }
          },
          {
            "test_id": "T22",
            "name": "api-endpoint-builder",
            "archetype": "Workflow Skill (Multi-Step Process)",
            "real_scenario": "Complex workflows with templates, scripts, examples",
            "status": "COMPLETED",
            "priority": "HIGH",
            "description": "Test multi-step workflow skill pattern",
            "validation": "Executes multi-step process autonomously using plan agent",
            "skill_file": "phase_11/test_T22.api.endpoint.builder.skill.md",
            "test_prompt": "Execute the api-endpoint-builder autonomous workflow",
            "success_criteria": [
              "Executes multi-step process autonomously",
              "Uses plan agent for workflow decisions",
              "Creates API endpoint following best practices",
              "Implements validation and error handling"
            ],
            "key_config": {
              "context": "fork",
              "agent": "Plan",
              "allowed-tools": ["Read", "Write", "Edit", "Bash"]
            }
          },
          {
            "test_id": "T23",
            "name": "deploy-production",
            "archetype": "Safety-Critical Skill (Manual-Only)",
            "real_scenario": "Deployment, data deletion, or other risky operations",
            "status": "COMPLETED",
            "priority": "HIGH",
            "description": "Test manual-only safety-critical skill pattern",
            "validation": "Skill requires explicit user invocation, auto-invocation blocked",
            "skill_file": "phase_11/test_T23.deploy.production.skill.md",
            "test_prompt": "Deploy to production with verification",
            "success_criteria": [
              "Skill requires explicit user invocation",
              "Auto-invocation blocked (safety check)",
              "Includes danger zone warnings",
              "Implements proper safety checks"
            ],
            "key_config": {
              "disable-model-invocation": true,
              "user-invocable": true,
              "context": "fork",
              "agent": "Plan"
            }
          },
          {
            "test_id": "T24",
            "name": "pr-reviewer",
            "archetype": "Skill with Dynamic Context Injection",
            "real_scenario": "Skills that need live data, git info, environment details",
            "status": "COMPLETED",
            "priority": "HIGH",
            "description": "Test dynamic context injection skill pattern",
            "validation": "Dynamic context (!command) executes before skill, live data injected",
            "skill_file": "phase_11/test_T24.pr.reviewer.skill.md",
            "test_prompt": "Execute the pr-reviewer capability with dynamic context",
            "success_criteria": [
              "Dynamic context (!command) executes before skill",
              "Live PR data injected into skill content",
              "Review analyzes actual PR diff",
              "Structured feedback with severity levels"
            ],
            "key_config": {
              "context": "fork",
              "agent": "Explore",
              "uses_dynamic_context": true,
              "allowed-tools": ["Read", "Grep", "Glob", "Bash"]
            }
          }
        ]
      },
      {
        "phase": 1,
        "name": "Basic Skill Calling",
        "description": "Test skills calling other skills without forking",
        "tests": [
          {
            "test_id": "1.1",
            "name": "Basic skill calling",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Regular -> Regular skill handoff works correctly",
            "findings": "One-way handoff confirmed - caller does NOT resume after called skill",
            "win_condition": "Skill chaining works but control transfers permanently",
            "evidence_file": "raw_logs/phase_1/test_1.1.basic.skill.calling.json",
            "duration_ms": 7736,
            "permission_denials": 0
          },
          {
            "test_id": "1.2",
            "name": "Three skill chain",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Three-skill chain demonstrates one-way handoff behavior",
            "findings": "skill-a calls skill-b, completes with SKILL_A_COMPLETE - skill-c never executes",
            "win_condition": "One-way handoff confirmed - control doesn't pass through chain",
            "evidence_file": "raw_logs/phase_1/test_1.2.three.skill.chain.json",
            "duration_ms": 13399,
            "permission_denials": 0
          }
        ]
      },
      {
        "phase": 2,
        "name": "Forked Skills Testing",
        "description": "Test context: fork behavior and isolation",
        "tests": [
          {
            "test_id": "2.1",
            "name": "Basic Fork",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Regular->forked enables subroutine pattern",
            "findings": "Control returns to caller after forked skill completes",
            "win_condition": "Subroutine pattern validated",
            "evidence_file": "raw_logs/phase_2/test_2.1.basic.fork.json"
          },
          {
            "test_id": "2.2",
            "name": "Context isolation",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Context variables don't leak to forked skills",
            "findings": "Complete isolation confirmed - forked skills cannot access caller's context",
            "win_condition": "CONTEXT_ISOLATION_CONFIRMED",
            "evidence_file": "raw_logs/phase_2/test_2.2.context.isolation.json",
            "duration_ms": 16886,
            "permission_denials": 0
          },
          {
            "test_id": "2.3",
            "name": "Forked autonomy",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Forked skills execute autonomously without user questions",
            "findings": "100% autonomy confirmed - makes independent decision (chooses TypeScript)",
            "win_condition": "INTERACTIVE_TEST_COMPLETE",
            "evidence_file": "raw_logs/phase_2/test_2.3.forked.autonomy.json",
            "duration_ms": 18570,
            "permission_denials": 0
          }
        ]
      },
      {
        "phase": "2b",
        "name": "Deep Context Verification",
        "description": "Implicit context checks for Standard, Agent, and Subagent forks",
        "tests": [
          {
            "test_id": "2.4",
            "name": "Standard Fork: Implicit Secret Check",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PROOF_COMPLETE",
            "summary": "Definitive proof of complete context isolation",
            "findings": "Forked skills cannot access conversation history, context variables, or environment variables from caller",
            "evidence": "Extended tests 2.4.1-2.4.5 provide comprehensive proof",
            "win_condition": "BLUE_BANANA (secret returned successfully)",
            "evidence_file": "raw_logs/phase_2/test_2.4.standard.fork.secret.check.FAILED.json",
            "duration_ms": 24088,
            "permission_denials": 0
          },
          {
            "test_id": "2.4.1",
            "name": "Context Audit",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "ISOLATION_PROVEN",
            "summary": "Systematic 8-point context audit confirms no access to variables",
            "findings": "All context variables show as ${variable} literal strings, not actual values",
            "win_condition": "## ISOLATION_PROVEN",
            "evidence_file": "raw_logs/phase_2/test_2.4.1.context.audit.json"
          },
          {
            "test_id": "2.4.2",
            "name": "Variable Modification Test",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "ISOLATION_PROVEN",
            "summary": "Environment variables set in main context not accessible in fork",
            "findings": "my_test_var=I_WAS_SET_IN_MAIN shows as ${my_test_var} in forked skill",
            "win_condition": "## ISOLATION_PROVEN",
            "evidence_file": "raw_logs/phase_2/test_2.4.2.variable.test.json"
          },
          {
            "test_id": "2.4.3a",
            "name": "Standard Fork Comparison",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "ISOLATION_PROVEN",
            "summary": "Standard fork shows same isolation as agent fork",
            "findings": "No access to context state, only environment variables at shell level",
            "win_condition": "## ISOLATION_PROVEN",
            "evidence_file": "raw_logs/phase_2/test_2.4.3a.standard.fork.json"
          },
          {
            "test_id": "2.4.3b",
            "name": "Agent Fork Comparison",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "ISOLATION_PROVEN",
            "summary": "Agent-based fork has identical isolation to standard fork",
            "findings": "Both fork types provide complete isolation guarantees",
            "win_condition": "## ISOLATION_PROVEN",
            "evidence_file": "raw_logs/phase_2/test_2.4.3b.agent.fork.json"
          },
          {
            "test_id": "2.4.4",
            "name": "History Access Test",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "ISOLATION_PROVEN",
            "summary": "Conversation history not accessible to forked skills",
            "findings": "Assistant couldn't understand 'Previous context:' information, responded with confusion",
            "win_condition": "## ISOLATION_PROVEN",
            "evidence_file": "raw_logs/phase_2/test_2.4.4.history.access.json"
          },
          {
            "test_id": "2.4.5",
            "name": "Plan Agent Fork Test",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "WORKS",
            "summary": "Plan agents work correctly in forked contexts without breaking questions",
            "findings": "context: fork + agent: Plan maintains autonomy, no breaking questions, proper isolation",
            "win_condition": "All agent types compatible with forked execution",
            "evidence_file": "raw_logs/phase_2/test_2.4.5.plan.fork.test.json"
          },
          {
            "test_id": "2.5",
            "name": "Explore Agent: Implicit Secret Check",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Explore agent in forked context properly isolated",
            "findings": "context: fork + agent: Explore confirmed isolated, autonomous",
            "win_condition": "## RESULT: UNKNOWN",
            "evidence_file": "raw_logs/phase_2/test_2.5.explore.agent.secret.check.json"
          },
          {
            "test_id": "2.6",
            "name": "Custom Subagent: Implicit Secret Check",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Custom subagents properly isolated from caller context",
            "findings": "spy-agent subagent cannot access main context secrets",
            "win_condition": "## RESULT: UNKNOWN",
            "evidence_file": "raw_logs/phase_2/test_2.6.custom.subagent.secret.check.json"
          }
        ]
      },
      {
        "phase": 3,
        "name": "Forked Skills Calling Subagents",
        "description": "Can forked skills call subagents?",
        "tests": [
          {
            "test_id": "3.1",
            "name": "Forked with Subagents",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Forked skills can access built-in agents",
            "findings": "Hub-and-spoke pattern validated",
            "win_condition": "Subagent access confirmed",
            "evidence_file": "raw_logs/phase_3/test_3.1.forked.with.subagents.json"
          },
          {
            "test_id": "3.2",
            "name": "Forked with custom subagents",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Forked skills can successfully call custom subagents",
            "findings": "Hub-and-spoke pattern validated - forked skills orchestrate subagents",
            "win_condition": "CUSTOM_AGENT_COMPLETE",
            "evidence_file": "raw_logs/phase_3/test_3.2.forked.with.custom.subagents.json",
            "duration_ms": 16574,
            "permission_denials": 0
          }
        ]
      },
      {
        "phase": 4,
        "name": "Advanced Forked Skill Patterns",
        "description": "Test complex forking scenarios",
        "tests": [
          {
            "test_id": "4.1",
            "name": "Context Transition",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Forked->regular transitions work",
            "findings": "Context transitions validated",
            "win_condition": "Context transition works",
            "evidence_file": "raw_logs/phase_4/test_4.1.context.transition.json"
          },
          {
            "test_id": "4.2",
            "name": "Double fork",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Nested context: fork works correctly (2 levels)",
            "findings": "Regular -> Forked -> Forked chain executes successfully with proper isolation at each level",
            "win_condition": "FORKED_OUTER_COMPLETE",
            "evidence_file": "raw_logs/phase_4/test_4.2.double.fork.json",
            "duration_ms": 50948,
            "permission_denials": 0
          },
          {
            "test_id": "4.3",
            "name": "Parallel forked execution",
            "status": "FAILED",
            "confidence": "HIGH",
            "result": "FAILED",
            "summary": "Orchestrator asked for clarification instead of executing autonomously",
            "findings": "Regular orchestrator skills may need explicit automation instructions",
            "win_condition": "## ORCHESTRATOR_COMPLETE",
            "evidence_file": "raw_logs/phase_4/test_4.3.parallel.forked.FAILED.json",
            "duration_ms": 7382,
            "permission_denials": 0,
            "issue": "Failed - Assistant asked questions instead of executing autonomously",
            "root_cause": "Skill not written for true autonomy, missing explicit automation"
          }
        ]
      },
      {
        "phase": 5,
        "name": "Context Transfer & Sharing",
        "description": "Test how context is transferred between skills",
        "tests": [
          {
            "test_id": "5.1",
            "name": "Parameter passing",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Data transfer via args works correctly",
            "findings": "Explicit parameter passing is the ONLY reliable method for forked skills",
            "win_condition": "DATA_RECEIVER_COMPLETE",
            "evidence_file": "raw_logs/phase_5/test_5.1.parameter.passing.json",
            "duration_ms": 12067,
            "permission_denials": 0
          },
          {
            "test_id": "5.2",
            "name": "Variable Blocking",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Variables properly isolated",
            "findings": "Context variables cannot be accessed from forked skills",
            "win_condition": "Isolation confirmed",
            "evidence_file": "raw_logs/phase_5/test_5.2.variable.blocking.json"
          }
        ]
      },
      {
        "phase": 6,
        "name": "Complex Layered Orchestration",
        "description": "Testing deep hierarchies and parallel workflows",
        "tests": [
          {
            "test_id": "6.1",
            "name": "Three-Layer Hierarchy",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Root -> Mid -> Leaf hierarchy executed successfully",
            "findings": "root-orchestrator called mid-manager, completed successfully",
            "win_condition": "ROOT_COMPLETE",
            "evidence_file": "raw_logs/phase_6/test_6.1.three.layer.hierarchy.json",
            "duration_ms": 8498,
            "permission_denials": 0
          },
          {
            "test_id": "6.2",
            "name": "Parallel Workers",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Orchestrator called worker-1 and worker-2, aggregated results",
            "findings": "Serial execution with result aggregation works correctly",
            "win_condition": "Workflow complete",
            "evidence_file": "raw_logs/phase_6/test_6.2.parallel.workers.json",
            "duration_ms": 15412,
            "permission_denials": 0
          }
        ]
      },
      {
        "phase": 7,
        "name": "Subagent Capabilities",
        "description": "Testing advanced subagent configuration fields",
        "tests": [
          {
            "test_id": "7.1",
            "name": "Subagent Skill Injection",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "summary": "Subagents can use skills injected via skills: field",
            "findings": "equipped-agent successfully used utility-skill, hub-and-spoke validated",
            "win_condition": "UTILITY_USED",
            "evidence_file": "raw_logs/phase_7/test_7.1.subagent.skill.injection.json",
            "duration_ms": 93536,
            "permission_denials": 0
          },
          {
            "test_id": "7.2",
            "name": "Audit Workflow",
            "status": "COMPLETED",
            "confidence": "MEDIUM",
            "result": "PARTIAL",
            "summary": "Real-world hub-and-spoke orchestration started",
            "findings": "audit-orchestrator initiated but execution incomplete in log",
            "win_condition": "Audit workflow completes",
            "evidence_file": "raw_logs/phase_7/test_7.2.audit.workflow.json"
          }
        ]
      },
      {
        "phase": 8,
        "name": "Error Handling & Reliability",
        "description": "Test failure modes and recovery",
        "tests": [
          {
            "test_id": "8.1",
            "name": "Chain Failure Propagation",
            "status": "COMPLETED",
            "confidence": "HIGH",
            "result": "PASS",
            "priority": "HIGH",
            "description": "What happens when middle skill in chain fails?",
            "summary": "Forked skill 'failures' are just content, not system errors",
            "findings": "Forked skills always complete normally from system perspective - errors are text content, not exceptions. No automatic error propagation mechanism exists.",
            "win_condition": "CHAIN_PROPAGATION_COMPLETE",
            "evidence_file": "raw_logs/phase_8/test_8_1_chain_failure_propagation.json",
            "duration_ms": 57767,
            "permission_denials": 0,
            "autonomy_score": 100
          }
        ]
      },
      {
        "phase": 12,
        "name": "Sprint 1: TaskList Orchestration",
        "description": "Validate TaskList as orchestration primitive",
        "sprint_goal": "TaskList executes dependencies, parallel tasks, coordinates with forked skills, handles errors, persists across sessions",
        "tests": [
          {
            "test_id": "T1",
            "name": "deployment-pipeline-orchestrator",
            "pattern": "TaskList sequential workflow",
            "real_scenario": "Multi-step deployment pipeline",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Orchestrate deployment pipeline using TaskList with sequential dependencies",
            "validation": "TaskList creates proper dependency chains, tasks execute in correct order",
            "skill_file": "phase_12/test_T1.deployment.pipeline.orchestrator.skill.md",
            "test_prompt": "Execute the deployment-pipeline-orchestrator autonomous workflow",
            "success_criteria": [
              "Tasks created with proper dependencies",
              "Sequential execution order validated",
              "Completion markers present",
              "Results aggregated correctly"
            ]
          },
          {
            "test_id": "T2",
            "name": "parallel-analysis-coordinator",
            "pattern": "TaskList parallel execution",
            "real_scenario": "Parallel code analysis",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Coordinate parallel analysis tasks using TaskList",
            "validation": "TaskList executes tasks concurrently, properly aggregates results",
            "skill_file": "phase_12/test_T2.parallel.analysis.coordinator.skill.md",
            "test_prompt": "Execute the parallel-analysis-coordination capability",
            "success_criteria": [
              "Independent tasks created without blocking",
              "Concurrent execution achieved",
              "Results aggregated into report"
            ]
          },
          {
            "test_id": "T3",
            "name": "distributed-processor",
            "pattern": "TaskList + forked skills",
            "real_scenario": "Distributed data processing",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Process data using TaskList and forked skills",
            "context": "fork",
            "validation": "TaskList coordinates with forked skills correctly",
            "skill_file": "phase_12/test_T3.distributed.processor.skill.md",
            "test_prompt": "Execute the distributed-processor autonomous workflow",
            "success_criteria": [
              "TaskList tasks invoke forked skills via Skill tool",
              "Parallel execution with isolation",
              "Results aggregation works"
            ]
          },
          {
            "test_id": "T4",
            "name": "ci-pipeline-manager",
            "pattern": "TaskList error handling",
            "real_scenario": "CI pipeline with failure recovery",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Test TaskList error handling and recovery",
            "context": "fork",
            "validation": "TaskList properly handles task failures and dependent task blocking",
            "skill_file": "phase_12/test_T4.ci.pipeline.manager.skill.md",
            "test_prompt": "Execute the ci-pipeline-management autonomous workflow",
            "success_criteria": [
              "Task failure simulated correctly",
              "Blocked tasks don't execute",
              "Cleanup tasks execute on failure"
            ]
          },
          {
            "test_id": "T5",
            "name": "multi-session-orchestrator",
            "pattern": "Cross-session TaskList",
            "real_scenario": "Long-running multi-session workflow",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Test TaskList cross-session persistence",
            "validation": "TaskList persists state across sessions, tasks maintain status",
            "skill_file": "phase_12/test_T5.multi.session.orchestrator.skill.md",
            "test_prompt": "Execute the multi-session-orchestrator test",
            "success_criteria": [
              "TaskList ID persisted",
              "Task status preserved across sessions",
              "Continuation works correctly"
            ]
          }
        ]
      },
      {
        "phase": 13,
        "name": "Sprint 2: Subagent Orchestration",
        "description": "Validate subagent orchestration capabilities",
        "sprint_goal": "Subagents use injected skills correctly, dynamic context passes, handle errors autonomously, coordinate properly, handle timeouts",
        "tests": [
          {
            "test_id": "T6",
            "name": "code-reviewer-subagent",
            "pattern": "Subagent skill composition",
            "real_scenario": "Code reviewer with quality checks",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Subagent that reviews code using injected skills",
            "agent": "general-purpose",
            "injected_skills": ["security-review", "style-review", "test-coverage"],
            "validation": "Subagent successfully uses injected skills, composes results",
            "skill_file": "phase_13/test_T6.code.reviewer.subagent.skill.md",
            "test_prompt": "Execute the code-review-subagent autonomous workflow",
            "success_criteria": [
              "Subagent uses all injected skills",
              "Findings aggregated into report",
              "Review completed autonomously"
            ]
          },
          {
            "test_id": "T7",
            "name": "context-aware-analyzer",
            "pattern": "Dynamic context injection",
            "real_scenario": "Context-aware specialist",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Analyzer that receives project context dynamically",
            "context": "fork",
            "validation": "Subagent receives and utilizes dynamic context correctly",
            "skill_file": "phase_13/test_T7.context.aware.analyzer.skill.md",
            "test_prompt": "Execute the context-aware-analysis capability",
            "success_criteria": [
              "Context parsed from args",
              "Analysis tailored to context",
              "Recommendations context-aware"
            ]
          },
          {
            "test_id": "T8",
            "name": "resilient-processor",
            "pattern": "Subagent error recovery",
            "real_scenario": "Robust data processor",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Subagent that handles errors gracefully",
            "agent": "general-purpose",
            "validation": "Subagent implements error recovery logic autonomously",
            "skill_file": "phase_13/test_T8.resilient.processor.skill.md",
            "test_prompt": "Execute the resilient-processor autonomous workflow",
            "success_criteria": [
              "Primary attempt executed",
              "Fallback executed on failure",
              "Recovery suggestions provided"
            ]
          },
          {
            "test_id": "T9",
            "name": "distributed-validator",
            "pattern": "Multi-subagent coordination",
            "real_scenario": "Distributed system validation",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Coordinate multiple subagents for system validation",
            "validation": "Multiple subagents coordinate properly, results aggregated",
            "skill_file": "phase_13/test_T9.distributed.validator.skill.md",
            "test_prompt": "Execute the distributed-validation capability",
            "success_criteria": [
              "Multiple subagents spawned",
              "All subagents complete work",
              "Results synthesized into report"
            ]
          },
          {
            "test_id": "T10",
            "name": "big-data-processor",
            "pattern": "Subagent timeout",
            "real_scenario": "Big data processing",
            "status": "NOT_STARTED",
            "priority": "MEDIUM",
            "description": "Test subagent timeout handling",
            "agent": "general-purpose",
            "validation": "Subagent handles timeouts gracefully with progress preservation",
            "skill_file": "phase_13/test_T10.big.data.processor.skill.md",
            "test_prompt": "Execute the big-data-processing capability",
            "success_criteria": [
              "Progress made within time budget",
              "Checkpoint saved on timeout",
              "Continuation instructions provided"
            ]
          }
        ]
      },
      {
        "phase": 14,
        "name": "Sprint 3: Skill-Subagent Orchestration",
        "description": "Validate skill-subagent-TaskList integration",
        "sprint_goal": "Skills call subagents that call skills, TaskList coordinates with forked skills, nested TaskList structures work, error recovery across chains, aggregation works",
        "tests": [
          {
            "test_id": "T11",
            "name": "multi-phase-analyzer",
            "pattern": "Skill→Subagent→Skill",
            "real_scenario": "Multi-phase analysis",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Orchestrate multi-phase analysis with subagent and skill",
            "validation": "Three-layer coordination works (skill → subagent → forked skill)",
            "skill_file": "phase_14/test_T11.multi.phase.analyzer.skill.md",
            "test_prompt": "Execute the multi-phase-analysis capability",
            "success_criteria": [
              "Phase 1: Subagent spawned for codebase exploration",
              "Phase 2: Forked skill called for vulnerability scanning",
              "Phase 3: Findings aggregated successfully"
            ]
          },
          {
            "test_id": "T12",
            "name": "tasklist-audit-hub",
            "pattern": "Hub-and-Spoke with TaskList",
            "real_scenario": "Complex audit orchestration",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Orchestrate audit using TaskList for coordination",
            "validation": "TaskList + forked skills coordination works",
            "skill_file": "phase_14/test_T12.tasklist.audit.hub.skill.md",
            "test_prompt": "Execute the tasklist-audit-hub autonomous workflow",
            "success_criteria": [
              "TaskList creates worker tasks",
              "Each task calls forked skill",
              "Aggregation task waits for all audits",
              "Comprehensive report generated"
            ]
          },
          {
            "test_id": "T13",
            "name": "hierarchical-builder",
            "pattern": "Nested TaskList + forked skills",
            "real_scenario": "Hierarchical build system",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Test nested TaskList with forked skill workers",
            "validation": "Nested TaskList with forked skills works correctly",
            "skill_file": "phase_14/test_T13.hierarchical.builder.skill.md",
            "test_prompt": "Execute the hierarchical-build autonomous workflow",
            "success_criteria": [
              "Parent TaskList created",
              "Child TaskLists created within parent tasks",
              "Forked skills called from child tasks",
              "All complete successfully"
            ]
          },
          {
            "test_id": "T14",
            "name": "resilient-workflow",
            "pattern": "Error recovery in skill chains",
            "real_scenario": "Resilient workflow",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Handle failures in skill-subagent chains",
            "validation": "Skill chains handle subagent failures with fallbacks",
            "skill_file": "phase_14/test_T14.resilient.workflow.skill.md",
            "test_prompt": "Execute the resilient-workflow autonomous workflow",
            "success_criteria": [
              "Primary path attempted",
              "Fallback executed on failure",
              "Path taken reported"
            ]
          },
          {
            "test_id": "T15",
            "name": "system-reporter",
            "pattern": "Skill aggregation from subagents",
            "real_scenario": "Comprehensive system report",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "description": "Aggregate results from multiple specialist subagents",
            "validation": "Skill successfully collects and synthesizes multi-subagent results",
            "skill_file": "phase_14/test_T15.system.reporter.skill.md",
            "test_prompt": "Execute the system-reporting autonomous workflow",
            "success_criteria": [
              "Multiple subagents spawned",
              "All results collected",
              "Comprehensive report synthesized"
            ]
          }
        ]
      },
      {
        "phase": 15,
        "name": "Sprint 4: Advanced Nesting Patterns",
        "description": "Validate complex nesting and edge cases",
        "sprint_goal": "Three-level nesting works, forked skills can use TaskList, circular dependencies detected",
        "tests": [
          {
            "test_id": "T16",
            "name": "deep-analysis-pipeline",
            "pattern": "Triple-level forking",
            "real_scenario": "Deep analysis pipeline",
            "status": "NOT_STARTED",
            "priority": "MEDIUM",
            "description": "Test triple-level forking with real analysis",
            "validation": "Three-level nesting works with proper isolation",
            "skill_file": "phase_15/test_T16.deep.analysis.pipeline.skill.md",
            "test_prompt": "Execute the deep-analysis-pipeline autonomous workflow",
            "success_criteria": [
              "Level 1: Subagent spawned",
              "Level 2: Subagent calls forked skill",
              "Level 3: Forked skill calls another forked skill",
              "Findings reported with level information"
            ]
          },
          {
            "test_id": "T17",
            "name": "isolated-coordinator",
            "pattern": "Forked skill with TaskList",
            "real_scenario": "Isolated parallel processing",
            "status": "NOT_STARTED",
            "priority": "MEDIUM",
            "description": "Forked skill that uses TaskList internally",
            "context": "fork",
            "validation": "Forked skill can use TaskList for internal coordination",
            "skill_file": "phase_15/test_T17.isolated.coordinator.skill.md",
            "test_prompt": "Execute the isolated-coordination autonomous workflow",
            "success_criteria": [
              "TaskList used within forked context",
              "All processing happens in isolation",
              "Merged results returned to caller"
            ]
          },
          {
            "test_id": "T18",
            "name": "dependency-resolver",
            "pattern": "Circular dependency detection",
            "real_scenario": "Build system with circular refs",
            "status": "NOT_STARTED",
            "priority": "LOW",
            "description": "Detect and resolve circular dependencies",
            "context": "fork",
            "validation": "System detects and reports circular dependencies correctly",
            "skill_file": "phase_15/test_T18.dependency.resolver.skill.md",
            "test_prompt": "Execute the dependency-resolution capability",
            "success_criteria": [
              "Circular references detected",
              "All circular dependency chains reported",
              "Breaking points identified",
              "Resolution strategies recommended"
            ]
          }
        ]
      },
      {
        "phase": 16,
        "name": "Sprint 5: State & Session Patterns",
        "description": "Validate state and session management",
        "sprint_goal": "Forked skills maintain state across invocations, TaskList enables cross-session workflow continuation",
        "tests": [
          {
            "test_id": "T19",
            "name": "incremental-analyzer",
            "pattern": "State persistence in forked context",
            "real_scenario": "Incremental analysis",
            "status": "NOT_STARTED",
            "priority": "MEDIUM",
            "description": "Test state persistence across skill invocations",
            "context": "fork",
            "validation": "Forked skill can maintain state across separate invocations",
            "skill_file": "phase_16/test_T19.incremental.analyzer.skill.md",
            "test_prompt": "Execute the incremental-analysis autonomous workflow",
            "success_criteria": [
              "First invocation: Creates state file",
              "Subsequent invocations: Load and continue",
              "Final invocation: Reports complete analysis"
            ]
          },
          {
            "test_id": "T20",
            "name": "migration-orchestrator",
            "pattern": "Multi-session workflow with TaskList",
            "real_scenario": "Long-running project migration",
            "status": "NOT_STARTED",
            "priority": "MEDIUM",
            "description": "Test multi-session workflow with TaskList persistence",
            "validation": "TaskList enables workflow continuation across sessions",
            "skill_file": "phase_16/test_T20.migration.orchestrator.skill.md",
            "test_prompt": "Execute the migration-orchestrator autonomous workflow",
            "success_criteria": [
              "Session 1: TaskList created, phase-1 completed",
              "Session 2: TaskList loaded, phase-2 completed",
              "Migration finished across sessions"
            ]
          }
        ]
      }
    ],
    "implementation_roadmap": {
      "sprint_0": {
        "name": "Skill Archetypes",
        "tests": ["T21", "T22", "T23", "T24"],
        "duration": "Foundation",
        "priority": "HIGH",
        "success_criteria": [
          "Reference skills auto-apply without invocation",
          "Workflow skills execute multi-step processes autonomously",
          "Safety-critical skills require explicit invocation",
          "Dynamic context skills inject live data correctly"
        ],
        "quick_wins": "Provides immediate validation of skill archetype patterns"
      },
      "sprint_1": {
        "name": "TaskList Foundation",
        "tests": ["T1", "T2", "T3", "T4", "T5"],
        "duration": "Week 1",
        "priority": "HIGH",
        "success_criteria": [
          "TaskList executes dependencies correctly",
          "TaskList handles parallel execution",
          "TaskList coordinates with forked skills",
          "TaskList handles errors with proper blocking",
          "TaskList persists across sessions"
        ],
        "quick_wins": "Provides immediate TaskList validation"
      },
      "sprint_2": {
        "name": "Subagent Patterns",
        "tests": ["T6", "T7", "T8", "T9", "T10"],
        "duration": "Week 2",
        "priority": "HIGH",
        "success_criteria": [
          "Subagents use injected skills correctly",
          "Dynamic context passes to subagents",
          "Subagents handle errors autonomously",
          "Multiple subagents coordinate properly",
          "Subagents handle timeouts gracefully"
        ]
      },
      "sprint_3": {
        "name": "Orchestration Integration",
        "tests": ["T11", "T12", "T13", "T14", "T15"],
        "duration": "Week 3",
        "priority": "HIGH",
        "success_criteria": [
          "Skills successfully call subagents that call skills",
          "TaskList coordinates with forked skills",
          "Nested TaskList structures work",
          "Error recovery works across skill chains",
          "Skills aggregate multi-subagent results"
        ]
      },
      "sprint_4": {
        "name": "Advanced Nesting",
        "tests": ["T16", "T17", "T18"],
        "duration": "Week 4",
        "priority": "MEDIUM",
        "success_criteria": [
          "Three-level nesting works with isolation",
          "Forked skills can use TaskList internally",
          "Circular dependencies are detected and reported"
        ]
      },
      "sprint_5": {
        "name": "State Patterns",
        "tests": ["T19", "T20"],
        "duration": "Week 5",
        "priority": "MEDIUM",
        "success_criteria": [
          "Forked skills can maintain state across invocations",
          "TaskList enables cross-session workflow continuation"
        ]
      }
    },
    "quality_gates": {
      "autonomy_check": {
        "max_denials": 1,
        "completion_marker_required": true,
        "user_intervention_allowed": false
      },
      "real_condition_check": {
        "scenario_must_mirror_actual_usage": true,
        "data_fixtures_must_be_realistic": true,
        "must_test_actual_capability": true
      },
      "flexibility_check": {
        "specifies_what_not_how": true,
        "allows_claudes_intelligence_to_work": true,
        "not_over_prescriptive": true
      }
    },
    "success_metrics": {
      "after_all_24_tests": {
        "coverage": "33 patterns validated (9 existing + 4 archetypes + 20 orchestration)",
        "autonomy_target": "95%+ average (0-1 denials per test)",
        "representativeness": "100% of tests use real scenarios",
        "completeness": "All skill archetypes and orchestration patterns covered"
      }
    },
    "next_actions": [
      "Start with Sprint 0 (T21-T24): Skill archetype validation",
      "Create test directories for phase_11 tests",
      "Implement archetype test skills T21-T24",
      "Execute Sprint 0 tests using test-manager and runner",
      "Validate archetype patterns work correctly",
      "Proceed to Sprint 1 (T1-T5): TaskList orchestration patterns"
    ]
  }
}
