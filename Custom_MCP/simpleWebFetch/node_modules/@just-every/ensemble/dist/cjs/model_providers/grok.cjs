"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.grokProvider = exports.GrokProvider = void 0;
const openai_chat_js_1 = require("./openai_chat.cjs");
class GrokProvider extends openai_chat_js_1.OpenAIChat {
    constructor() {
        super('xai', process.env.XAI_API_KEY, 'https://api.x.ai/v1');
    }
    prepareParameters(requestParams) {
        if (Array.isArray(requestParams.tools)) {
            const index = requestParams.tools.findIndex(t => t.type === 'function' && t.function?.name === 'grok_web_search');
            if (index !== -1) {
                requestParams.tools.splice(index, 1);
                requestParams.search_parameters = {
                    mode: 'on',
                    return_citations: true,
                };
            }
        }
        return super.prepareParameters(requestParams);
    }
}
exports.GrokProvider = GrokProvider;
exports.grokProvider = new GrokProvider();
//# sourceMappingURL=grok.js.map